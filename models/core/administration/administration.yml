version: 2

models:
  - name: patient
    description: >
      Demographics and other administrative information about an individual receiving care or other health-related services.
      Refer to the official FHIR documentation for additional information: https://www.hl7.org/fhir/patient.html
    columns:
      - name: identifier_external_source
        description: Surrogate key made from various external source IDs
        tests:
          - not_null
          - unique

      - name: identifier_external_subscriber_id
        description: Member SSM assigned patient ID

      - name: identifier_sh_uid
        description: Strive assigned `sh_uid`

      - name: active
        description: Whether this patient's record is in active use. Can be used to determine admissibility
        tests:
          - accepted_values:
              values: ['true','false']

      - name: name_given_first
        description: First name associated with the patient

      - name: name_given_middle
        description: Middle name associated with the patient
        
      - name: name_family
        description: Last name associated with the patient

      - name: name_given_nickname
        description: Nickname associated with the patient

      - name: name_prefix
        description: Name prefix associated with the patient

      - name: identifier_social_security_number
        description: Social security number associated with the patient

      - name: birth_date
        description: The date of birth for the individual

      - name: gender
        description: Gender of the patient
        tests:
          - accepted_values:
              values: ['M','F','U']

      - name: race
        description: Race of the patient
        tests:
          - accepted_values:
              values: ['Unknown','White','Black or African American','Other Race','Asian','Hispanic','American Indian or Alaska Native']

      - name: ethnic_group
        description: Ethnic group of the patient

      - name: language_preferred
        description: Primary language spoken by the patient

      - name: language_secondary
        description: Secondary language spoken by the patient

      - name: deceased_date
        description: The date the patient was deceased

      - name: birth_country
        description: Country of birth associated with the patient

      - name: address_line1
        description: Address line 1 associated with the patient

      - name: address_line2
        description: Address line 2 associated with the patient

      - name: address_city
        description: Address city associated with the patient

      - name: address_state
        description: Address state associated with the patient

      - name: address_postal_code
        description: Address postal code associated with the patient

      - name: address_district
        description: Address county associated with the patient

      - name: address_country
        description: Address country associated with the patient

      - name: telecom_phone_number_home
        description: Home phone number associated with the patient

      - name: telecom_phone_number_work
        description: Work phone number associated with the patient

      - name: telecom_email_address
        description: Email address associated with the patient

      - name: general_practitioner
        description: Patient's nominated primary care provider (PCP)

      - name: client_id
        description: Strive client ID
        tests:
          - not_null
          - accepted_values:
              values: ['ssm','humana']

      - name: ingest_date
        description: Ingest date of when the record was ingested into the warehouse
        tests:
          - not_null
          - is_date:
              date_format: yyyy-mm-dd HH24:MI:SS

  - name: practitioner
    description: >
      A person who is directly or indirectly involved in the provisioning of healthcare..
      Refer to the official FHIR documentation for additional information: https://www.hl7.org/fhir/patient.html
    columns:
      - name: identifier_npi
        description: National Provider Identifier (NPI)
        tests:
          - not_null
          - unique

      - name: name_given_first
        description: First name associated with practitioner

      - name: name_given_middle
        description: Middle name associated with practitioner

      - name: name_family
        description: Last name associated with practitioner

      - name: name_prefix
        description: Name prefix associated with practitioner

      - name: name_suffix
        description: Name suffix associated with practitioner

      - name: address_line1
        description: Practitioner business address line 1

      - name: address_line2
        description: Practitioner business address line 2

      - name: address_city
        description: Practitioner business address city

      - name: address_state
        description: Practitioner business address state

      - name: address_postal_code
        description: Practitioner business addres postal code

      - name: telecom_phone_number_work
        description: Practitioner business phone number

      - name: telecom_fax_number_work
        description: Practitioner business fax number

      - name: gender
        description: Pracitioner gender
        tests:
          - accepted_values:
              values: ['M','F','U',None]

  - name: practitioner_role
    description: >
      A specific set of Roles/Locations/specialties/services that a practitioner may perform at an organization for a period of time.
      Refer to the official FHIR documentation for additional information: https://www.hl7.org/fhir/practitionerrole.html
    
    columns:
      - name: identifier_practitioner_role
        description: Unique ID for the practitioner role
        tests:
          - not_null
          - unique
          
      - name: practitioner
        description: Practitioner National Provider Identifier (NPI)
        tests:
          - not_null

      - name: specialty_code
        description: Code for specific specialty of the practitioner
        tests:
          - not_null

      - name: specialty_code_display
        description: Display name for specific specialty of the practitioner

      - name: specialty_code_text
        description: Detailed text for specific specialty of the practitioner

      - name: telecom_work_phone_number
        description: Practitioner work phone number associated with the pratice

      - name: telecom_work_fax_number
        description: Practitioner work fax number associated with the practice